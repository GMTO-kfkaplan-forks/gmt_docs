

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3. Telescope Control System &mdash; GMT Software And Controls documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/additional_style.css" type="text/css" />
  

  

  
    <link rel="top" title="GMT Software And Controls documentation" href="../../index.html"/>
        <link rel="up" title="Architecture and Design" href="../index.html"/>
        <link rel="next" title="3.5.1. Natural Seeing Observing Mode" href="wavefront_control/ns_obsmode.html"/>
        <link rel="prev" title="2. Overall Architecture" href="../architecture/overall_architecture.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> GMT Software And Controls
          

          
            
            <img src="../../_static/logowhite.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../release_notes/index.html">Release Notes</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Architecture and Design</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../introduction/swcs_introduction.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/overall_architecture.html">2. Overall Architecture</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. Telescope Control System</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subsystems">3.1. Subsystems</a></li>
<li class="toctree-l3"><a class="reference internal" href="#degrees-of-freedom">3.2. Degrees of Freedom</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements-on-tcs-pointing-tracking-guiding">3.3. Requirements on TCS, Pointing, Tracking &amp; Guiding</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pointing-kernel">3.4. Pointing Kernel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#telescope-pointing-software-libraries">3.4.1. <em>Telescope Pointing Software Libraries</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#workflow-tracking-pointing-and-guiding">3.4.2. <em>Workflow: Tracking, Pointing, and Guiding</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#coordinate-systems-and-transformation-flow">3.4.3. <em>Coordinate Systems and Transformation Flow</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="#virtual-telescopes-and-the-telescope-pointing-model">3.4.4. <em>Virtual Telescopes and the Telescope Pointing Model</em></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#wavefront-control">3.5. Wavefront Control</a><ul>
<li class="toctree-l4"><a class="reference internal" href="wavefront_control/ns_obsmode.html">3.5.1. <em>Natural Seeing Observing Mode</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="wavefront_control/ngsao_obsmode.html">3.5.2. <em>Natural Guide Star Adaptive Optics (NGSAO)</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="wavefront_control/ltao_obsmode.html">3.5.3. <em>Laser Tomographic Adaptive Optics (LTAO)</em></a></li>
<li class="toctree-l4"><a class="reference internal" href="wavefront_control/nglao_obsmode.html">3.5.4. <em>Natural-Guidestar Ground Layer Adaptive Optics (NGLAO)</em></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../services/observatory_services.html">4. Observatory Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../frameworks/component_frameworks.html">5. Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../platform/platform.html">6. Platform</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process/process_introduction.html">7. Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="../risks/risks.html">8. Software and Control Risks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bibliography/bibliography.html">9. Bibliography</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../SWC_standards/index.html">Software and Controls Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../software_development/index.html">Software Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../data_products/index.html">Data Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary/swc_sys_glossary.html">Software and Controls Acronyms and Definitions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">GMT Software And Controls</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Architecture and Design</a> &raquo;</li>
      
    <li>3. Telescope Control System</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="telescope-control-system">
<span id="tcs-introduction"></span><h1>3. Telescope Control System<a class="headerlink" href="#telescope-control-system" title="Permalink to this headline">¶</a></h1>
<p>The Telescope Control System (TCS) encompasses the subsystems in charge of the
control of the telescope optomechanical devices. The design considerations of
the TCS provide a solution that seamlessly unifies the different modes of
operation: natural seeing, ground-layer AO (GLAO), laser tomography AO (LTAO),
into one system that is coherent, easy to manage, maintain, and upgrade.</p>
<p>The TCS subsystems are organized in a control and supervisory subsystem
hierarchy that mirrors the physical arrangement of the telescope subsystems. At
the bottom of the hierarchy, device control subsystems take care of the control
and operation support for the independent telescope hardware devices. These
devices are developed following different timelines and procurement paths (e.g.,
M2 positioner, M1 control system, Mount control system). This separation is
similar to the one used in other telescope projects and provides a modular
design that facilitates interface definition, development planning, and
integration and commissioning activities. Often these subsystems will have an
independent Factory Acceptance Test process prior to integration at the
observatory. Each device control subsystem follows the reference architecture as
described in <a class="reference internal" href="../frameworks/component_frameworks.html#device-control-framework"><span class="std std-ref">Device Control Framework</span></a>. In addition, to the device control
subsystems – mainly concerned by mechanical degrees of freedom – two subsystems
provide high-level coordination and control functions: the Pointing Kernel and
Wavefront Control System (WFCS).</p>
<p>The Wavefront Control System provides the high-level optical control of the
telescope. The Pointing Kernel relates sky coordinates with mechanical and
detector coordinates and vice versa. The wavefront control and pointing kernel
subsystems coordinate these low-level device control subsystems to point the
telescope and move probes to the corresponding targets, to achieve and maintain
the nominal optical configuration, and to close the wavefront correction loops
during the execution of an observation. Observations and other operations are
defined and automated using the tools provided by the observatory operations
system (e.g., observing tools, sequencer).</p>
<p>Although the most critical function of the TCS is the control of the hardware
devices, efficiency, safety, and robust operations are also essential to
operations.  Those considerations lead to a design of the TCS that also has the
following functionalities:</p>
<blockquote>
<div><ul class="simple">
<li>Calibration. In many subsystems, calibration software is required to produce
error maps or look-up tables that allow the control system to perform with
the necessary accuracy.</li>
<li>Diagnosis. Some of the GMT hardware subsystems are quite complex. Specific
software components are often required to verify the behavior of the system
or to troubleshoot it in case of incorrect behavior.</li>
<li>Safety. There are some scenarios where a hardware device could be damaged
due to incorrect operation. The Interlock and Safety System (ISS) is
ultimately responsible for preventing any damage to equipment or injury to
people by the telescope. The ISS may “kick-in” in a drastic way. Safety
control components implement a safe operation that avoids the engagement of
the ISS.</li>
<li>Supervision. Often the operation of a subsystem involves the coordination of
several subordinate components. It is then the TCS’s responsibility to
guarantee that subordinate components are in the correct state, and that the
performance degrades gracefully in off- nominal scenarios. In addition to
managing the configuration, startup, and shutdown of the control subsystems
and hardware devices, supervisory components also implement kinematic
transformations or anti-collision protection strategies when the system
under control requires it.</li>
</ul>
</div></blockquote>
<p>The sections below give an overview of the TCS. <a class="reference internal" href="#tcs-subsystems"><span class="std std-ref">TCS Subsystems</span></a> provides a summary of the subsystems inside the TCS, followed
by the degrees of freedom that the TCS controls in
<a class="reference internal" href="#tcs-degrees-of-freedom"><span class="std std-ref">Degrees of Freedom</span></a>. The <a class="reference internal" href="#tcs-requirements"><span class="std std-ref">Requirements on TCS, Pointing, Tracking &amp; Guiding</span></a> section presents the
requirements governing the TCS design and operations, followed by details of the
<a class="reference internal" href="#tcs-pointing-kernel"><span class="std std-ref">Pointing Kernel</span></a>.  Lastly, the Section on <a class="reference internal" href="#tcs-wavefront-control"><span class="std std-ref">Wavefront Control</span></a>
(TBC...) briefly describes the architecture of the GMT Wavefront Control System
(WFCS), and the specific designs of the GMT Natural and AO observing modes.</p>
<div class="section" id="subsystems">
<span id="tcs-subsystems"></span><h2>3.1. Subsystems<a class="headerlink" href="#subsystems" title="Permalink to this headline">¶</a></h2>
<p>The previous section introduces the concept of Device Control Subsystems.  The
<a class="reference internal" href="#figure-tcs-subsystems-overview"><span class="std std-ref">Figure below</span></a> shows the TCS device
control subsystems, organized in functional categories. Each subsystem includes
the required software packages as described in <a class="reference internal" href="../architecture/overall_architecture.html#architecture-modules"><span class="std std-ref">Modules: Subsystem, Packages, Components</span></a>.</p>
<div class="figure" id="id24">
<span id="figure-tcs-subsystems-overview"></span><img alt="../../_images/tcs-subsystems-overview.png" src="../../_images/tcs-subsystems-overview.png" />
<p class="caption"><span class="caption-number">Fig. 11 </span><span class="caption-text">TCS Subsystems Overview</span></p>
</div>
</div>
<div class="section" id="degrees-of-freedom">
<span id="tcs-degrees-of-freedom"></span><h2>3.2. Degrees of Freedom<a class="headerlink" href="#degrees-of-freedom" title="Permalink to this headline">¶</a></h2>
<p>The table below shows an overview of the different elementary mechanical degrees
of freedom of the telescope subsystems (AO subsystems are not included in this
table). Axis groups are identified specifically.  The first column identifies
the name of the mechanism; the second column the number of instances; the Axes
column identifies the number of axes per instance; the DOF column identifies the
total number of degrees of freedom; the Controller Profile Mode column
identifies the motion control profile as defined in IEC 61800-7 <a class="reference internal" href="../bibliography/bibliography.html#iec61800-7-1" id="id1">[IEC61800-7-1]</a>; and the
Actuator Type column identifies the generic category of the actuator.</p>
<table border="1" class="docutils" id="id25">
<caption><span class="caption-number">Table 3 </span><span class="caption-text">Telescope Degrees of Freedom</span><a class="headerlink" href="#id25" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="7%" />
<col width="25%" />
<col width="7%" />
<col width="6%" />
<col width="8%" />
<col width="30%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">Mechanism</th>
<th class="head">#</th>
<th class="head">Axes</th>
<th class="head">DOF</th>
<th class="head">Controller Profile Mode</th>
<th class="head">Actuator Type</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td colspan="7"><strong>M1</strong></td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Hardpoint X, Y, Z</div>
</div>
</td>
<td>7</td>
<td>6</td>
<td>42</td>
<td>Interpolated Position</td>
<td>Axis Group</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Hardpoint Actuator</td>
<td>42</td>
<td>1</td>
<td>42</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Triple Support</div>
</div>
</td>
<td>595</td>
<td>3</td>
<td>1785</td>
<td>Force</td>
<td>Pneumatic</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Single Support</div>
</div>
</td>
<td>560</td>
<td>1</td>
<td>560</td>
<td>Force</td>
<td>Pneumatic</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Fan Assemblies</div>
</div>
</td>
<td>322</td>
<td>1</td>
<td>322</td>
<td>Profile Velocity</td>
<td>3-Phase Fan</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Mixing Valve</div>
</div>
</td>
<td>7</td>
<td>1</td>
<td>7</td>
<td>Profile Position/Velocity</td>
<td>Valve/Pump</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Mirror Cover (off-axis)</div>
</div>
</td>
<td>6</td>
<td>1</td>
<td>6</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Mirror Cover (on-axis)</div>
</div>
</td>
<td>6</td>
<td>1</td>
<td>6</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="7"><strong>M2</strong></td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Positioner X, Y, Z, Rx, Ry, Rz</div>
</div>
</td>
<td>7</td>
<td>6</td>
<td>42</td>
<td>Interpolated Position</td>
<td>Axis Group</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Linear Actuator</td>
<td>42</td>
<td>1</td>
<td>42</td>
<td>Cyclic Synchronous Position</td>
<td>Stepper Motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">FSM, Tip, Tilt, Piston</div>
</div>
</td>
<td>7</td>
<td>3</td>
<td>21</td>
<td>Interpolated Position</td>
<td>Axis Group</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>FSM Actuator</td>
<td>21</td>
<td>1</td>
<td>21</td>
<td>Cyclic Synchronous Position</td>
<td>Piezo</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">FSM Pres/Vac Support</div>
</div>
</td>
<td>7</td>
<td>1</td>
<td>7</td>
<td>Profile Position</td>
<td>Pneumatic Valve</td>
</tr>
<tr class="row-odd"><td colspan="7"><strong>M3</strong></td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Deployment</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Rotation</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Tip, Tilt, Piston</div>
</div>
</td>
<td>1</td>
<td>3</td>
<td>3</td>
<td>Interpolated Position</td>
<td>Axis Group</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>M3 Actuator</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="7"><strong>AGWS Probe Arms</strong></td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">AGWS Arm Stage</div>
</div>
</td>
<td>4</td>
<td>3</td>
<td>12</td>
<td>Interpolated Position</td>
<td>Axis Group</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Azimuth</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Radial</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Focus</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Pick-off Mirror Tilt</div>
</div>
</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Profile Position</td>
<td>Voice Coil</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Fold Mirror Tilt</div>
</div>
</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Profile Position</td>
<td>Voice Coil</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Sensor Select</div>
</div>
</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Ap/Cal Source Select</div>
</div>
</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">TT7 De-Rotation</div>
</div>
</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Profile Position</td>
<td>Newport motor</td>
</tr>
<tr class="row-even"><td colspan="7"><strong>AGWS Phasing Camera</strong></td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Phasing Camera Stage</div>
</div>
</td>
<td>1</td>
<td>3</td>
<td>3</td>
<td>Interpolated Position</td>
<td>Axis Group</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Azimuth</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Radial</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Focus</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Pick-off Mirror Tilt</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Voice Coil</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Fold Mirror Tilt</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Voice Coil</td>
</tr>
<tr class="row-odd"><td colspan="7"><strong>AGWS On-Axis AGWS</strong></td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">OAWFS Depolyment</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">OAWFS Focus</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Sensor Select</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Ap/Cal Source Select</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Pick-off Mirror Tilt</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="7"><strong>Mount</strong></td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Azimuth Axis</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Cyclic Synchronous Position</td>
<td>Axis Group</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Azimuth Forcers</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Cyclic Synchronous Torque</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Elevation Axis</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Cyclic Synchronous Position</td>
<td>Axis Group</td>
</tr>
<tr class="row-odd"><td>&nbsp;</td>
<td>Elevation Forcers</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Cyclic Synchronous Torque</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">HBS Pump</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Velocity</td>
<td>Induction motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Azimuth Cable Wrap</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Elevation Cable Wrap</div>
</div>
</td>
<td>2</td>
<td>1</td>
<td>1</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Locking Pins</div>
</div>
</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>Profile Position</td>
<td>Linear Actuator</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Counter Weights Vertical</div>
</div>
</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Counter Weights Horizontal</div>
</div>
</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="7"><strong>GIR</strong></td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Rotation Axis</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Cyclic Synchronous Position</td>
<td>Axis Group</td>
</tr>
<tr class="row-even"><td>&nbsp;</td>
<td>Friction Actuator</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>Cyclic Synchronous Torque</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">GIR Cable Wrap</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Cyclic Synchronous Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">GIR Counter Weights</div>
</div>
</td>
<td>1</td>
<td>2</td>
<td>2</td>
<td>Profile Position</td>
<td>Servo motor</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">DG Instrument Deployment</div>
</div>
</td>
<td>4</td>
<td>1</td>
<td>4</td>
<td>Profile Position</td>
<td>Linear Actuator</td>
</tr>
<tr class="row-even"><td colspan="7"><strong>Corrector-ADC</strong></td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Deployment</div>
</div>
</td>
<td>1</td>
<td>1</td>
<td>1</td>
<td>Profile Position</td>
<td>Stepper motor</td>
</tr>
<tr class="row-even"><td colspan="2"><div class="first last line-block">
<div class="line">Locking Mechanism</div>
</div>
</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>Profile Position</td>
<td>Pneumatic</td>
</tr>
<tr class="row-odd"><td colspan="2"><div class="first last line-block">
<div class="line">Prism Rotators</div>
</div>
</td>
<td>2</td>
<td>1</td>
<td>2</td>
<td>Cyclic Synchronous Position</td>
<td>Stepper motor</td>
</tr>
<tr class="row-even"><td colspan="2">&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td colspan="2">&nbsp;</td>
</tr>
<tr class="row-odd"><td colspan="2"><strong>Total</strong></td>
<td>&nbsp;</td>
<td>76</td>
<td>3005</td>
<td colspan="2">&nbsp;</td>
</tr>
</tbody>
</table>
<p>There are a total of 77 different types of axes; some of them have multiple
instances, for a total of 3005 mechanical degrees of freedom. Despite this large
number, only 5 motion control profiles, based on the IEC 61800-7-201/301
<a class="reference internal" href="../bibliography/bibliography.html#iec61800-7-201" id="id2">[IEC61800-7-201]</a> <a class="reference internal" href="../bibliography/bibliography.html#iec61800-7-301" id="id3">[IEC61800-7-301]</a> standard, are necessary to implement the
elementary degrees of freedom. This enables the possibility of a standardized
motion platform.</p>
</div>
<div class="section" id="requirements-on-tcs-pointing-tracking-guiding">
<span id="tcs-requirements"></span><h2>3.3. Requirements on TCS, Pointing, Tracking &amp; Guiding<a class="headerlink" href="#requirements-on-tcs-pointing-tracking-guiding" title="Permalink to this headline">¶</a></h2>
<p>The requirements governing the TCS and telescope motion control flow several
levels down from the System Level to the SWCS level(s).  Broadly, the
requirements of the TCS address: initial blind pointing accuracy, pointing
accuracy, tracking modes, continuous scan, pointing offsets, acquisition and
reacquisition and, finally, special requirements on the active optics, with
details to follow below.</p>
<p><strong>Blind pointing</strong> relies entirely on the mechanical positional accuracy of the
telescope encoder systems on the telescope axes and lookup tables to slew the
telescope to the desired sky [α, δ] or mount [Az, El] coordinates. Blind
pointing occurs in open loop (active optics and adaptive optics), and is used to
position the telescope to within the capture range of the AGWS in the GIR, with
which to achieve higher accuracy pointing and guiding on targets. Typically, an
initial blind pointing is performed once in the beginning of the night to remove
systematic errors due to temperature and flexure, so as to establish a nominal
pointing origin, and fine-tune the initial pointing model for the night.
Subsequent blind pointing checks may be required throughout the night to achieve
the higher precision.</p>
<p>After the telescope positions a target to within the capture range of the AGWS
via blind pointing, the four probes of the GIR will reposition to acquire guide
stars in the telescope focal plane, which improves the pointing to sub-arcsecond
accuracy. The fine pointing accuracy requirements are referenced to, and
measured at, the center of the field of view delivered to the science
instruments located at either the direct Gregorian or folded ports, under
natural seeing. To meet the requirements for fine pointing, it is necessary to
correct for the physical offsets and differential flexure between the science
instrument and the telescope via the pointing model.</p>
<p><strong>Telescope tracking</strong> keeps a celestial coordinate position fixed in the field
of view, by rotating the telescope elevation, azimuth, and GIR axes. Tracking
uses look-up tables that account for mount errors and relative flexure between
the telescope structure and the instrument.</p>
<p><strong>Fine guiding</strong> operates in closed loop, using the positions of guide stars on
the AGWS or On-Instrument Wavefront Sensor (OIWFS) to make slight adjustments to
maintain much more accurate telescope positions, removing the effects of wind
buffeting, mechanical errors, time-dependent flexures, or other perturbations.
Guiding adjustments are small corrections on top of the telescope sky-tracking
rate. GMT will use four guide-probes in the AGWS to sense pointing and guiding
errors in three axes (elevation, azimuth, and rotation in GIR).</p>
<p>Several tracking modes will be implemented: Sidereal, non-sidereal, GIR fixed
rotator, GIR field, GIR parallactic, and GIR fixed pupil. Non-sidereal tracking
is used for scanning or for solar system targets where the AGWS and the OIWS
track at the sidereal rate while the telescope mount guides on the science
target to maintain its position fixed in the science detector reference frame.</p>
<p><strong>Drift scanning</strong> is an observing technique to obtain imaging or spectroscopy
data over an area of the sky by allowing the telescope pointing to drift at a
constant rate relative to the sky motion. During scanning, depending on the
science goal, the science detectors may be synchronized and read out
continuously to minimize image smearing, or they may stay in continuous
integration. In continuous scanning mode, the AGWS continuously tracks guide
stars to maintain mirror figure and pointing accuracy.  However, as the guide
stars may move outside the guider field during integration, the pointing kernel
is responsible for finding and reacquiring guide stars somewhere in the field
seamlessly and automatically.</p>
<p><strong>Pointing offsets</strong> are used during observing to reposition the science
detector relative to the pointing origin of the telescope. Offsetting is used
for many purposes, such as to obtain sky observations, to position objects onto
a slit or aperture, to create mosaic observations, etc.</p>
<p>The <strong>telescope pointing kernel</strong>, in cooperation with the WFCS system, performs
telescope pointing, tracking, acquisition, and guiding. There are requirements
for the different observing modes (natural seeing, LTAO, NGSAO).  In the event
that the active optics system is disabled, the pointing kernel is required to
continue telescope guiding and tracking.</p>
</div>
<div class="section" id="pointing-kernel">
<span id="tcs-pointing-kernel"></span><h2>3.4. Pointing Kernel<a class="headerlink" href="#pointing-kernel" title="Permalink to this headline">¶</a></h2>
<p>The telescope pointing kernel (Figure <a class="reference internal" href="#figure-tel-pointing-kernel"><span class="std std-ref">below</span></a>)
is the subsystem that performs essential services to point the telescope to a
desired sky location, to track the sky rotation, and to provide fine guiding on
a target. The outputs of the pointing kernel are mechanical encoder values that
are used to command repositioning of the mount and the instrument rotator (blue
boxes in <a class="reference internal" href="#figure-tel-pointing-kernel"><span class="std std-ref">Figure below</span></a>). The GMT pointing
kernel is built on the <em>TCSpk</em> <a class="reference internal" href="../bibliography/bibliography.html#wall12a" id="id4">[Wall12a]</a>, <em>tpk</em> <a class="reference internal" href="../bibliography/bibliography.html#terr06" id="id5">[Terr06]</a>, and <em>SLALIB</em>
<a class="reference internal" href="../bibliography/bibliography.html#wall12b" id="id6">[Wall12b]</a>, packages developed by TPoint Software.  The pointing kernel:</p>
<blockquote>
<div><ul class="simple">
<li>Predicts the mount encoder angles required to image a specific coordinate on
the sky to a given location in the focal plane</li>
<li>Provides accurate mapping of the World Coordinate System (WCS). For example
to enable mapping of celestial coordinates onto locations in the
focal-plane, and vice versa, using <em>SLALIB</em> <a class="reference internal" href="../bibliography/bibliography.html#wall12b" id="id7">[Wall12b]</a> to account for
atmospheric refraction, pressure, temperature, Earth’s precession, nutation,
light deflection, etc.</li>
<li>Enables telescope tracking and autoguiding</li>
<li>Allows rapid repositioning of the telescope to transfer an imaging field
from one focal plane (e.g., an acquisition device) onto another (e.g.,
instrument detector), thereby enabling fast dithering and precise blind
positioning onto slits and fibers</li>
<li>Allows multiple coordinate systems to be active at the same time allowing,
for example, tracking of a planet while guiding on a star</li>
<li>Handles autoguiding in an integrated way, with differential refraction and
atmospheric dispersion being taken care of at a system level</li>
</ul>
</div></blockquote>
<p>These features will be available in all natural seeing and AO observing modes.</p>
<div class="figure" id="id26">
<span id="figure-tel-pointing-kernel"></span><img alt="../../_images/tcs-pointing-kernel.png" src="../../_images/tcs-pointing-kernel.png" />
<p class="caption"><span class="caption-number">Fig. 12 </span><span class="caption-text">Telescope Pointing Kernel</span></p>
</div>
<p>The telescope pointing kernel is composed of three primary components: Target
Server, Supervisor, and Virtual Telescopes. The functions of each component are
briefly described:</p>
<blockquote>
<div><ul class="simple">
<li>Target Server (<em>pk_target_server</em>) – The Target Server is the high level
server telling the telescope where in the sky or at which targets to aim. It
possesses high-level knowledge about the science program being observed,
i.e., the science targets, the guide stars needed to perform an observation,
and the desired pointing location on an instrument. The server takes as
inputs an observing definition (e.g., observing templates produced from the
Phase 2 proposal) and object catalogs, and produces a set of coordinates to
send to the pointing kernel supervisor for implementation. For telescope
dithering, the target server receives and interprets the dithering strategy
to provide coordinates to reposition the telescope.</li>
<li>Supervisor (<em>pk_supervisor</em>) – Most components (e.g., subsystems and devices)
involved in telescope pointing, tracking, and guiding, merely act on the
data and instructions provided to them without regard to the overall
purpose.  However if, for example, the WFCS fails to acquire a guide star,
or a guide star moves outside the guide field (for guiding on a non-sidereal
target) a supervisor must decide on a corrective course of action. The
pointing kernel supervisor provides the intelligence to decide what actions
to take in the event of success or failure in acquisition and guiding. In
addition, the pointing kernel supervisor implements the pointing model;
maintains the context for slow, medium and fast guiding and tracking
calculations; and manages which virtual telescopes are active at any given
time.</li>
<li>Virtual Telescopes (<em>vt</em>) – A central concept in TCSpk is the “Virtual
Telescope”, which takes as input a desired coordinate and performs the
detailed transformations necessary to make accurate telescope pointing a
transparent process. As viewed from the perspective of end-users and
software control interfaces, the virtual telescope therefore appears like a
perfect telescope. The virtual telescope relates three pieces of information
necessary to position the telescope: the mount directional pointing [Az,
El], the location of an image in an instrument focal plane [x, y], and the
celestial coordinate of a target [α, δ]. Knowing two out of the three
quantities, the virtual telescope can predict the third. The virtual
telescope enables one to position a target fixed at any location and
orientation on an instrument, accounting for the rotator angle. There is at
least one virtual telescope assigned to each focal station that has an
instrument. Each instrument can have multiple virtual telescopes that have
different pointing origins to allow fast dithering, accurate positioning of
a target onto a slit or fiber aperture, and other purposes. The virtual
telescope generates mechanical demands to the mount encoders to reposition
the telescope.</li>
</ul>
</div></blockquote>
<div class="section" id="telescope-pointing-software-libraries">
<h3>3.4.1. <em>Telescope Pointing Software Libraries</em><a class="headerlink" href="#telescope-pointing-software-libraries" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The TCS pointing and tracking control will be built around a core set of
software libraries: TCSpk <a class="reference internal" href="../bibliography/bibliography.html#wall12a" id="id8">[Wall12a]</a>, SLALIB <a class="reference internal" href="../bibliography/bibliography.html#wall12b" id="id9">[Wall12b]</a>, and tpk <a class="reference internal" href="../bibliography/bibliography.html#terr06" id="id10">[Terr06]</a>,
which are used on many telescopes currently in operation, e.g.,
Magellan, Keck, GTC, VLT, Gemini, and LBT. The software libraries provide the
following functionalities:</p>
<blockquote>
<div><ul>
<li><p class="first"><em>SLALIB</em> <a class="reference internal" href="../bibliography/bibliography.html#wall12b" id="id11">[Wall12b]</a> – A library of over 200 functions in ANSI C for
positional astronomy, SLALIB comprises functions and numerical methods that
calculate spherical trigonometry, vectors and matrices, and coordinate and
time transformations required to achieve milliarcsecond pointing accuracy to
celestial targets. Key examples of positional astronomy computations and
transformations performed by SLALIB include:</p>
<ul class="simple">
<li>Celestial –
catalog coordinates such as FK4, FK5, galactic, geocentric
coordinates, ICRS, proper motion, target proper motion, parallax, and
radial velocity.</li>
<li>Terrestrial –
atmospheric refraction, diurnal aberrations, precession and
nutation, mean place to apparent and observed place, focal plane
astrometry.</li>
<li>Time –
time systems (UTC, GST, LAST, etc.), calendar, epochs, ephemerides</li>
</ul>
<p>SLALIB supports both IAU 2000/2006 precession-nutation and Earth rotation
models in both classical (equinox-based) and Conventional International Origin
forms. Details of the celestial coordinate systems used by the TCS and the
transformation flow going from user specified celestial coordinates to
observed directions are discussed below.</p>
</li>
<li><p class="first"><em>TCSpk</em> <a class="reference internal" href="../bibliography/bibliography.html#wall12a" id="id12">[Wall12a]</a> – A library of roughly 70 functions in ANSI C makes up
the TCS Pointing Kernel (TCSpk), around which the TCS is designed. The TCSpk
library provides modular functions that can be assembled in flexible ways to
implement telescope pointing patterns and strategies, and that place few
constraints on the design and potential capabilities of the TCS. TCSpk
interfaces with SLALIB for positional astronomy calculations so that the
complexities of transforming coordinates are transparent to the designer.
TCSpk also interfaces with TPOINT for calculating pointing corrections.</p>
</li>
<li><p class="first"><em>tpk</em> <a class="reference internal" href="../bibliography/bibliography.html#terr06" id="id13">[Terr06]</a> – The Telescope Pointing Kernel (tpk) is a C++ library of
classes that is layered on top of TCSpk and SLALIB to create virtual
telescopes (see below) for the mount, rotators, guiders, instruments, etc.,
and to produce encoder angle demands that point the telescope, and that
position rotator and guiders based on inputs from the virtual telescopes.</p>
</li>
<li><p class="first"><em>TPOINT</em> <a class="reference internal" href="../bibliography/bibliography.html#wall94" id="id14">[Wall94]</a> – Software for analyzing telescope pointing, TPOINT helps
to assess and measure misalignments and flexures in the telescope and
instruments.  Data produced by TCSpk / tpk interface directly with TPOINT
for analysis, while collimation and flexure errors measured by TPOINT can
directly feed back into TCSpk / tpk to reduce pointing errors.</p>
</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="workflow-tracking-pointing-and-guiding">
<h3>3.4.2. <em>Workflow: Tracking, Pointing, and Guiding</em><a class="headerlink" href="#workflow-tracking-pointing-and-guiding" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The pointing and tracking for the GMT will follow a similar scheme as that used
by some of the monolithic and segmented telescopes currently in operation (e.g.,
Magellan, VLT, Keck, GTC). The TCS does not manage image stacking of the seven
mirror segments individually. That responsibility falls to the WFCS subsystem,
which performs optical collimation, mirror figure shaping, and phasing of the
seven M1 and M2 segments. Each observing mode (LTAO, NGSAO, natural seeing) has
its own WFCS control loop. If there are residual, time-averaged, tip-tilt values
from M1 and M2, the WFCS offloads the values to the TCS, which causes the mount
to reposition. Doing so cleanly separates mount control from active optics and
AO so that the TCS needs only to have a conventional scheme for telescope
pointing. From the standpoint of telescope pointing, tracking and guiding, it
therefore makes no practical difference whether the observing mode is natural
seeing (using fast tip-tilt M2) or AO (using ASMs). Details of telescope
collimation and phasing for the different observing modes (natural seeing,
NGSAO, GLAO, LTAO) are discussed in <a class="reference internal" href="#tcs-wavefront-control"><span class="std std-ref">Wavefront Control</span></a>.</p>
<p>Telescope tracking, pointing, and guiding, follow the schematics shown in the
three Figures below, and summarized here:</p>
<blockquote>
<div><ul>
<li><p class="first"><em>Sky Tracking</em> -
When the telescope operator initiates telescope sky tracking
(<a class="reference internal" href="#figure-sky-tracking"><span class="std std-ref">Figure below</span></a>), the pointing kernel transforms
the current mount location in [Az, El] into a sky coordinate in [α, δ],
then generates an [Az, El] trajectory to follow the sky motion (details of
coordinate transformations are discussed below).  The stream of
coordinates produced by the pointing kernel feeds into the mount control
system (MCS) servo loop.  The servo loop then compares the mount [Az, El]
position with the time-stamped demands and moves the mount so as to
minimize the difference, i.e., the error signal.  When the MCS receives a
new coordinate the current one is immediately discarded.  Details of the
MCS are presented in the Telescope Chapter.</p>
<p>The pointing kernel also generates coordinate streams for different
sky-tracking modes using the virtual telescopes, such as non-sidereal
tracking, drift scanning, and maintaining the pointing origin at a fixed
[α, δ] with the rotator turned off, or with the instrument fixed at a
constant position angle.  Doing so requires coordinating the rotation of
the GIR as well as rotation/translation of the telescope mount axes, all
of which are performed by TCSpk.</p>
</li>
</ul>
<div class="figure" id="id27">
<span id="figure-sky-tracking"></span><img alt="../../_images/tcs-sky_tracking.png" src="../../_images/tcs-sky_tracking.png" />
<p class="caption"><span class="caption-number">Fig. 13 </span><span class="caption-text">Sky Tracking Workflow</span></p>
</div>
<ul class="simple">
<li><em>Pointing</em> - Like with telescope tracking, the act of pointing the mount
utilizes only mount encoder information.  As shown in the <a class="reference internal" href="#figure-mount-pointing"><span class="std std-ref">Figure
below</span></a>, to point to a new location in the sky, the
user provides a coordinate [α, δ] or [Az, El] to the TCS.  The pointing
kernel translates the input coordinate into mount [Az, El] demands.  Upon
receiving the demands, the MCS servo loop repositions the mount.  If the
telescope is already in tracking mode when it arrives at the new location,
the mount motion continues along the tracking trajectory.  Without
sky-tracking, all mount motion would come to a stop as soon as the mount
arrives at the demanded location.  Details of the telescope pointing
sequence are provided in the Operation Concept Definition Document (OCDD)
GMT-AO- REF-00244 <a class="reference internal" href="../bibliography/bibliography.html#tran13" id="id15">[Tran13]</a>.</li>
</ul>
<div class="figure" id="id28">
<span id="figure-mount-pointing"></span><img alt="../../_images/tcs-mount_pointing.png" src="../../_images/tcs-mount_pointing.png" />
<p class="caption"><span class="caption-number">Fig. 14 </span><span class="caption-text">Telescope Mount Pointing Workflow</span></p>
</div>
<ul class="simple">
<li><em>Autoguiding</em> -
The process of autoguiding is shown schematically in the <a class="reference internal" href="#figure-autoguiding"><span class="std std-ref">Figure
below</span></a>; details of the sequences involved in setting up
autoguiding are provided in the OCDD. Like with telescope tracking, the
pointing kernel is responsible for producing trajectories based on a given
[α, δ] coordinate and instrument orientation. The responsibility for
calculating fine corrections using guide stars falls to the Wavefront
Control System, which decides whether to apply the translational motions to
the mirror optical assembly or to offload them to the telescope mount via
the pointing kernel. In this scheme, the telescope pointing kernel is
oblivious to whether the offload is due to autoguiding or for other reasons.
Offloads to the pointing kernel from the WFCS are delivered to the pointing
kernel as guiding corrections, from which the pointing kernel produces an
appropriate trajectory for the MCS servo loop.</li>
</ul>
<div class="figure" id="id29">
<span id="figure-autoguiding"></span><img alt="../../_images/tcs-autoguiding.png" src="../../_images/tcs-autoguiding.png" />
<p class="caption"><span class="caption-number">Fig. 15 </span><span class="caption-text">Target Autoguiding Workflow</span></p>
</div>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="coordinate-systems-and-transformation-flow">
<h3>3.4.3. <em>Coordinate Systems and Transformation Flow</em><a class="headerlink" href="#coordinate-systems-and-transformation-flow" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>There are several coordinate systems in common use in astronomy.  When an
astronomer specifies a target coordinate, that information often needs to be
transformed into another system before it can be used to command the telescope
to a [Az, El] location and for telescope tracking.  The general implementation
strategy for pointing, tracking, and guiding involves two transformations.
First the transformation of target coordinates from celestial [α, δ] (or [Az,
El]) into an observed direction [Az, El] to point the telescope, accounting for:
coordinate systems, space motions, Earth motions, refraction, and other
non-instrumental terms.  Next the pointing kernel transforms observed [Az, El]
direction into mechanical encoder direction for the mount, via a “pointing
model” to account for: misalignment of the mount, tube flexure, instrument
flexure, etc., as well as user desired pointing origin, and offset from base
(e.g., for scanning).</p>
<p>Fully specifying a target’s location in the sky requires the following
information:</p>
<blockquote>
<div><ul class="simple">
<li>Coordinates – In [α, δ] or [Az, El].</li>
<li>Coordinate system – e.g., whether the [α, δ] is in FK4, FK5, or Topocentric
apparent system.</li>
<li>Equinox – e.g., B1950.0 or J2000.  Before 1984, the equinox is usually in
the B system, whereas on or after 1984, it is usually in the J system.  The
default is to assume J2000, FK5 coordinate system.</li>
<li>Epoch – For objects that have proper motions, this is the time-zero from
which proper motions are calculated.  The epoch is generally specified as a
given year (e.g., 1964.25).</li>
<li>Proper motion – There are various units for proper motion (arcsec yr
<sup>-1</sup>, arcmin century <sup>-1</sup>, etc.).  By default proper motion is
zero.</li>
<li>Parallax – Usually has units of [arcsec], and the default value is zero.</li>
<li>Radial velocity – Usually has units of [km s <sup>-1</sup>], and the default
value is zero.</li>
</ul>
</div></blockquote>
<p>Supported coordinate systems and the subsequent transformation flow are
described below.</p>
<p><em>Coordinate Systems</em></p>
<blockquote>
<div>The coordinate systems that will be supported are listed and described in
the Table below; the default will be ICRS:</div></blockquote>
<table border="1" class="docutils" id="id30">
<caption><span class="caption-number">Table 4 </span><span class="caption-text">Coordinate Systems Supported by the TCS</span><a class="headerlink" href="#id30" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Coordinate System</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><div class="first last line-block">
<div class="line">FK4 [α, δ]</div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Often referred to as the B1950 (Besselian epoch 1950.0) coordinate</div>
<div class="line">system, this mean equatorial system pre-dates the 1976 IAU resolutions.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">FK5 [α, δ]</div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Often referred to as the J2000 (Julian epoch 2000.0) coordinate system,</div>
<div class="line">this mean equatorial system post-dates the 1976 IAU resolutions.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">ICRS [α, δ]</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">The International Celestial Reference System (ICRS) is the current</div>
<div class="line">standard adopted by the International Astronomical Union, beginning</div>
<div class="line">1998. The origin is at the barycenter of the solar system with the axes</div>
<div class="line">fixed in space, and corresponds closely to FK5 J2000 to within ~30</div>
<div class="line">mas for an object. [Default]</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Topocentric</div>
<div class="line">apparent [α, δ]</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Mostly used for solar system targets when inputs come from solar system</div>
<div class="line">ephemeris.  programs where parallax (annual and diurnal), planetary</div>
<div class="line">aberrations, and their motions (i.e., tracking rates in [α, δ]), would</div>
<div class="line">already have been pre-computed.</div>
</div>
</td>
</tr>
<tr class="row-even"><td><div class="first last line-block">
<div class="line">Observed [Az, El]</div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Used when another program, external to the TCS, has made all the</div>
<div class="line">transformations necessary.</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><div class="first last line-block">
<div class="line">Mount [Az, El]</div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</td>
<td><div class="first last line-block">
<div class="line">Mostly used for engineering and calibration applications. The relation</div>
<div class="line">between the Mount [Az, El] and observed [Az, El] is given by the</div>
<div class="line">pointing model.</div>
</div>
</td>
</tr>
</tbody>
</table>
<p><em>Celestial Coordinate System Transformation Flow</em></p>
<blockquote>
<div><p>Given a coordinate [α, δ] in any celestial coordinate system by an astronomer,
the TCS will convert it to FK5, J2000, and the current epoch, before producing
the apparent [α, δ] used to aim the telescope. The transformation flow and the
terms to correct for are given in the following
<a class="reference internal" href="#figure-transformation-flow"><span class="std std-ref">Figure</span></a>. The TCS uses SLALIB <a class="reference internal" href="../bibliography/bibliography.html#wall12b" id="id16">[Wall12b]</a> to
transform celestial coordinates into an apparent direction to point the
telescope. New coordinate systems will be supported as interests and needs
arise by upgrading or replacing SLALIB with another tool.</p>
<div class="figure" id="id31">
<span id="figure-transformation-flow"></span><img alt="../../_images/tcs-transformation-flow.png" src="../../_images/tcs-transformation-flow.png" />
<p class="caption"><span class="caption-number">Fig. 16 </span><span class="caption-text">Transformation Flow</span></p>
</div>
<p>The above Figure shows the transformation flow taking coordinates from one
reference frame to another, adapted from Wallace <a class="reference internal" href="../bibliography/bibliography.html#wall12b" id="id17">[Wall12b]</a>. All input coordinates are
eventually converted into FK5, J2000, current epoch, before final conversions
to apparent [α, δ] to point the telescope.</p>
</div></blockquote>
<p><em>Transformation of Celestial System to Mount Encoder Positions</em></p>
<blockquote>
<div><p>The <a class="reference internal" href="#figure-pointing-flow"><span class="std std-ref">TCS/MCS Pointing Flow Figure (below)</span></a> shows
the steps taken to convert celestial coordinates [α, δ] into instrumental
direction [Az, El] and rotator angles that the mount servo system needs to
position the telescope. There are two flow directions, distinguished by how
often the information needs to update: downward (slow, ≳20 Hz) and upward
(fast, ≫20 Hz). The downward direction (upper half of Figure) first transforms
target celestial coordinates into a corresponding line-of- sight [Az, El]
coordinate, correcting for terms that are independent of the telescope mount.
Those terms include: aberrations (annual and diurnal), light deflection,
precession/nutation, Earth’s rotation, motion around the sun, parallax, and
refraction.</p>
<p>Next, additional errors factor in via pointing models (blue box, and see
<a class="reference internal" href="#figure-virtual-telescope"><span class="std std-ref">Virtual Telescope Figure (below)</span></a>), such as
mount non-perpendicularity and tube flexure. A pointing model consists of a
set of coefficients that accounts for non-perpendicularity of the telescope
axes, imperfections in alignment, flexure, or other mechanical imperfections.
Lastly, to position the target coordinate at the user desired locationon the
science detector (i.e., a slit or image pixel), it is necessary to offset the
pointing origin to that location, which involves adjusting the rotator angle
and position offset relative to the optical telescope axis. The above
transformations result in the actual demand, angle [Az, El] for aiming the
telescope mount.</p>
<p>In contrast, upward transformations (lower half of Figure) take place at much
higher frequencies (≫20 Hz), the purpose of which is to react to fast
mechanical positioning demands, such as target scanning, tip-tilt guiding,
wind perturbations, AO closed loop operations, image centroiding, and encoder
errors.  The telescope Az/El servo system compares the mount demand (downward
flow) versus that achieved (upward flow) to determine the appropriate actions
for the mount.</p>
<div class="figure align-center" id="id32">
<span id="figure-pointing-flow"></span><img alt="../../_images/tcs-pointing-flow.png" src="../../_images/tcs-pointing-flow.png" />
<p class="caption"><span class="caption-number">Fig. 17 </span><span class="caption-text">TCS/MCS Pointing Flow.  The blue box is the telescope pointing model,
details of which are elaborated in <a class="reference internal" href="#figure-virtual-telescope"><span class="std std-ref">the Figure below on the Virtual
Telescope</span></a>.  Horizontal arrows indicate the
different pointing coordinates: Mean [α, δ], Apparent [α, δ], Topocentric
[-h, δ], Observed [Az, El], and Mount [Az, El], users may specify and where
they enter the flow in the transformation.</span></p>
</div>
<p>The TCS/MCS pointing flow, above, adapted from Wallace <a class="reference internal" href="../bibliography/bibliography.html#wall12a" id="id18">[Wall12a]</a>, shows the
transformation flow that takes target positions from the TCS (e.g., celestial
coordinates [α, δ]) into mount encoder demands delivered to the MCS servo
systems (in small box).  Details of the pointing model, blue box, are
elaborated in <a class="reference internal" href="#figure-virtual-telescope"><span class="std std-ref">the Figure below on the Virtual
Telescope</span></a>.</p>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="virtual-telescopes-and-the-telescope-pointing-model">
<h3>3.4.4. <em>Virtual Telescopes and the Telescope Pointing Model</em><a class="headerlink" href="#virtual-telescopes-and-the-telescope-pointing-model" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>The concept and use of a Virtual Telescope was introduced earlier, as one of
the three main components that make up <a class="reference internal" href="#figure-tel-pointing-kernel"><span class="std std-ref">the Telescope Pointing
Kernel</span></a>.  To review, the purpose of the virtual
telescope is to make all the necessary coordinate transformations and
mechanical correction so the telescope can point accurately to a command
position in a manner transparent to users by hiding the complexities.  In
reality, what happens &#8220;behind-the-scene&#8221; when an observer commands the
telescope to to a position in the sky is given by <a class="reference internal" href="#figure-pointing-flow"><span class="std std-ref">the Pointing Flow
Figure (above)</span></a> and the <a class="reference internal" href="#figure-virtual-telescope"><span class="std std-ref">the Virtual Telescope
Figure (below)</span></a>.  Inside the Virtual Telescope is a
pointing model that handles particulars in the telescope mount orientation and
optical geometries (<a class="reference internal" href="#figure-virtual-telescope"><span class="std std-ref">blue box in Figure</span></a>).
The positional astronomy transformations from celestial coordinates into
observed direction is well-established and will use SLALIB <a class="reference internal" href="../bibliography/bibliography.html#wall12b" id="id19">[Wall12b]</a>.
Mechanical errors, misalignments, and flexure mapping/corrections will be
implemented using TCSpk <a class="reference internal" href="../bibliography/bibliography.html#wall12a" id="id20">[Wall12a]</a> and diagnosed using TPoint Software
<a class="reference internal" href="../bibliography/bibliography.html#wall94" id="id21">[Wall94]</a>.</p>
<p>Virtual telescopes with different focal positions can exist at the same time,
which enables fast dithering, fast re-positioning to transfer a target image
from one instrument to another and the ability to hold a sky target fixed at a
specified position and orientation on an instrument even as the rotator turns.
The virtual telescope generates mechanical demands (Az, El, rotator angle) to
the mount encoders to reposition the telescope.  Finally, the virtual
telescope allows for easy updates to the pointing model without having to
modify the source code for the pointing kernel.</p>
<p>Each focal station that has an instrument, including all wavefront sensors,
engineering cameras, and science instruments, will have at least one virtual
telescope and a pointing model. It is not unusual for an instrument to have
multiple virtual telescopes depending on the purpose, such as for generating
rotator and mount demands separately while the telescope is slewing.</p>
<p>The pointing model (<a class="reference internal" href="#figure-virtual-telescope"><span class="std std-ref">blue box in Figure</span></a>) in
the virtual telescope accounts for mechanical or structural imperfections,
such as telescope flexure, mount axis non-perpendicularity, encoder errors,
instrument misalignment, encoder errors, etc. Its position in the flow of
coordinate transformations is shown as blue boxes in <a class="reference internal" href="#figure-pointing-flow"><span class="std std-ref">the Figure above
(Pointing Flow)</span></a>  and <a class="reference internal" href="#figure-virtual-telescope"><span class="std std-ref">Figure below (Virtual
Telescope)</span></a>. The output of the virtual telescope,
after accounting for the pointing model, is a trajectory for mount and rotator
encoder demands which is delivered to the mount and rotator control servo.
<a class="reference internal" href="#figure-pointing-flow"><span class="std std-ref">The TCS/MCS Pointing Flow Figure (above)</span></a> shows
the coordinate transformation flow in natural seeing observing mode</p>
<div class="figure align-center" id="id33">
<span id="figure-virtual-telescope"></span><img alt="../../_images/tcs-virtual-telescope.png" src="../../_images/tcs-virtual-telescope.png" />
<p class="caption"><span class="caption-number">Fig. 18 </span><span class="caption-text">Virtual Telescope and Pointing Model (blue box).  Details of the target
coordinate transformation (the first 4 items in the figure) are given in
the upper half of the <a class="reference internal" href="#figure-pointing-flow"><span class="std std-ref">TCS/MCS Pointing Flow</span></a>.</span></p>
</div>
<p>The above Figure shows the &#8220;Virtual Telescope&#8221; and transformation terms that
make up the pointing model; figure taken from Wallace <a class="reference internal" href="../bibliography/bibliography.html#wall12a" id="id22">[Wall12a]</a>. The
telescope pointing model (blue box) typically consists of 10-20 correction
terms, here summarized into 7-terms: IA (roll), IB (pitch), VD (vertical
deflection), CA (optical telescope axis/pitch non-perpendicularity), NP
(roll/pitch non-perpendicularity), AW and AN (roll axis misalignments).  GA
and GB are guiding corrections to the steady telescope tracking rate.</p>
</div></blockquote>
</div>
</div>
<div class="section" id="wavefront-control">
<span id="tcs-wavefront-control"></span><h2>3.5. Wavefront Control<a class="headerlink" href="#wavefront-control" title="Permalink to this headline">¶</a></h2>
<p>The Wavefront Control System (WFCS) is the set of TCS software components that
implements all active and adaptive optics control for the GMT. It includes all
of the software and computing hardware necessary to determine the optical
aberrations detected by AO and telescope wavefront sensors and to convert them
into corrections applied to the AO and telescope optics. This integrated
wavefront control approach is different than that followed by many previous
telescope projects in which the AO control system was logically distinct from
the telescope control system. This approach, enabled by the concurrent
development of telescope and AO systems, avoids the duplication of
infrastructure components and facilitates the consistent design of different GMT
observing modes, especially when the boundary between telescope and AO becomes
fuzzy (e.g., AGWS wavefront sensors are used in some AO modes or the ASM is used
in natural seeing mode).</p>
<p>The wavefront control system involves hardware and software components developed
in several groups and organizations. A careful and systematic definition of
interfaces that evolve with the design is of paramount importance to ensure
that, once integrated, the system operates with the required performance and
robustness.</p>
<p>The GMT is required to support four observing modes: Natural Seeing, GLAO,
NGSAO, and LTAO. A different but overlapping set of wavefront sensors and
optical compensators is used to meet the optical performance requirements of
each. The WFCS must therefore be modular and reconfigurable, while providing the
high computing performance and low latency required for AO control. In the TCS,
each observing mode has a distinct wavefront controller, but all modes share
some common software components. Each wavefront controller is instantiated at
runtime; the connections between software components are established by a
wavefront control supervisor component specific to each observing mode. A
top-level wavefront control supervisor implements changes between observing
modes.</p>
<p>One type of component common to all observing modes is the optics controller.
The M1 Optics Controller converts wavefront residuals to segment rigid body
motions and bending modes, which are then passed on to the M1 System hardware
controllers. The M2 Optics Controller converts wavefront errors such as focus
and pointing-neutral tilt to rigid body motions of the M2 segments, which are
passed on to the M2 Positioner hardware controller.</p>
<p>A full description of the implementation of the wavefront controller for each of
the three AO observing modes is given in the AO Preliminary Design Report
<a class="reference internal" href="../bibliography/bibliography.html#bouc13" id="id23">[Bouc13]</a>.  Only an outline of the Natural Guide star Ground Layer AO observing
mode WFC is presented here, providing an example of the interaction between the
AO wavefront controller components and the Active Optics Wavefront Controller.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="wavefront_control/ns_obsmode.html">3.5.1. <em>Natural Seeing Observing Mode</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="wavefront_control/ngsao_obsmode.html">3.5.2. <em>Natural Guide Star Adaptive Optics (NGSAO)</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="wavefront_control/ltao_obsmode.html">3.5.3. <em>Laser Tomographic Adaptive Optics (LTAO)</em></a></li>
<li class="toctree-l1"><a class="reference internal" href="wavefront_control/nglao_obsmode.html">3.5.4. <em>Natural-Guidestar Ground Layer Adaptive Optics (NGLAO)</em></a></li>
</ul>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="wavefront_control/ns_obsmode.html" class="btn btn-neutral float-right" title="3.5.1. Natural Seeing Observing Mode" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../architecture/overall_architecture.html" class="btn btn-neutral" title="2. Overall Architecture" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, contributors.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0-rc1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>